<!DOCTYPE html>
<!-- Heather Switzer, Ben Byrnes, Jacob Carney -->
<!-- HTML and CSS adapted from: https://www.w3schools.com/howto/tryit.asp?filename=tryhow_css_login_form_modal -->
<html>
	<head>
		<meta name="viewport" content="width=device-width, initial-scale=1">
		<link rel="stylesheet" type="text/css" href="{{url_for('static', filename='styles.css')}}">
		<link rel="shortcut icon" href="{{url_for('static', filename='favicon.ico')}}">
	</head>
	<body>
		<form name='signup' method="POST" onsubmit='event.preventDefault(); return validate();'>
			<div class="imgcontainer">
				<img src="{{url_for('static', filename='logo.svg')}}" alt="Avatar" class="avatar">
			</div>
			<div class="container">
				<label for="email"><b>Email</b></label>
				<input type="text" placeholder="Enter Email" name="email" required>      
				<label for="firstName"><b>First Name</b></label>
				<input type="text" placeholder="Enter First Name" name="firstName" required>
				<label for="lastName"><b>Last Name</b></label>
				<input type="text" placeholder="Enter Last Name" name="lastName" required>
				<label for="password"><b>Password</b></label>
				<input type="password" placeholder="Enter Password" name="password" required>
				<label for="psw2"><b>Confirm Password</b></label>
				<input type="password" placeholder="Confirm Password" name="psw2" required>
				<label for="type"><b>Account Type</b></label><br />
				<input type="radio" name="type" value="STUDENT" required>Student<br />
				<input type="radio" name="type" value="INSTRUCTOR" required>Instructor<br />
				<button type="Submit" onclick="validate();">Sign Up</button>
				<a href="{{url_for('login')}}"><button type="button">Login</button></a>
				<label>
					<div name='errordiv'id='errmsg' class='errmsg'>{{loginerror}}</div>
				</label>
			</div>
		</form>
		<script>
			var form = document.forms['signup'];
			var first_name = form['firstName'];
			var last_name = form['lastName'];
			var email = form['email'];
			var password = form['password'];
			var confirm_pword = form['psw2'];
			var type = form['type'];
			var erno = document.getElementById('errmsg')
			function validate(){
				var ret = true
				erno.innerHTML = '';
				if(first_name.value == '' || last_name.value == '' || email.value == '' || password.value == ''
					 || confirm_pword == '' || type.value == ''){
					erno.innerHTML += 'Must fill out all fields</br>';
					ret = false;
				}
				var atpos = email.value.indexOf("@");
				var dotpos = email.value.lastIndexOf(".");
				if (atpos<1 || dotpos<atpos+2 || dotpos+2>=email.value.length) {
					erno.innerHTML += "Not a valid e-mail address</br>";
					ret = false;
				}
				if(password.value != confirm_pword.value){
					erno.innerHTML += 'Passwords do not match!</br>';
					ret = false;
				}
				if(ret == true){
					form.submit();
				}
				return ret;
			}
		</script>

	</body>
</html>
